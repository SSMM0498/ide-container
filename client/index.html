<html>

<head>

</head>

<body>
    <button>Send hello</button>
    <script type="module">
        import { io } from "https://cdn.socket.io/4.3.2/socket.io.esm.min.js";
        const socket = io('http://localhost:1234');
        socket.on('connect', function () {
            console.log('Connected');
                        socket.emit('init');
                        // socket.emit('crud-create-folder', {
                        //     targetPath: "C:/Users/barsa/Documents/Coding/Learn/IDE\ -\ Proto/fileexp/ide-container/code/go"
                        // });
            //             socket.emit('crud-create-file', {
            //                 targetPath: "/home/arkad/code/go/main.go"
            //             });
            //             socket.emit('crud-update-file', {
            //                 targetPath: "/home/arkad/code/go/main.go",
            //                 fileContent: `package main

            // import "fmt"

            // func main() {
            // 	fmt.Println("Hello World!")
            // }
            // `
            //             });
                        // socket.emit('crud-read-file', {
                        //     targetPath: "/home/arkad/code/go/main.go"
                        // });

            socket.emit('watch-start');
            socket.emit('terminal-input', 'ls');

            socket.emit('terminal');
            socket.on('terminal-data', function (data) {
                console.log('terminal-data', data);
            });

            socket.on('read-file', function (data) {
                console.log('file content', data);
            });

            socket.on('read-folder', function (data) {
                console.log('folder content', data);
            });
        });

        const eventSource = new EventSource('http://127.0.0.1:1234/api/watch');
        console.log(eventSource);
        eventSource.onmessage = ({ data }) => {
            console.log(data);
            const message = document.createElement('li');
            message.innerText = 'New message: ' + JSON.stringify(data);
            document.body.appendChild(message);
        }
    </script>
</body>

</html>